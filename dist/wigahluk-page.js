!function(a){"use strict";a.module("wPage",["ngRoute","angulartics","angulartics.google.analytics","ngSanitize"]).config(["$routeProvider",function(a){a.when("/",{controller:"home/app",templateUrl:"app/home/app.html"}).when("/books",{controller:"books/app",templateUrl:"app/books/app.html"}).when("/about",{controller:"about/app",templateUrl:"app/about/app.html"}).when("/post/:post",{controller:"controller/post",templateUrl:"src/views/post.html"}).otherwise({redirectTo:"/"})}]),a.module("wPage").run(["$rootScope",function(a){a.appTitle="Wigahluk (Oscar Ponce BaÃ±uelos)",a.appTabs=[{url:"/",text:"wigahluk"},{url:"/books",text:"Bookshelf"},{url:"/about",text:"About"}]}])}(angular),function(a){"use strict";a.module("wPage").factory("postService",["$http","$q",function(a,b){function c(a,b,c){this.file=function(){return a.file()},this.type=function(){return a.type()},this.name=function(){return a.name()},this.date=function(){return c},this.content=function(){return b}}function d(a){this.file=function(){return"posts/"+a},this.type=function(){return _.endsWith(a,"html")?"html":"md"},this.name=function(){return a}}var e={index:function(){var c=b.defer();return a.get("dist/pindex.json").success(function(a,b,d,e){c.resolve(a)}).error(function(a,b,d,e){c.reject(a)}),c.promise},article:function(e){var f=b.defer(),g=new d(e);return a.get(g.file()).success(function(a,b,d,e){var h=d("last-modified");h=new Date(h);var i=new c(g,a,h);f.resolve(i)}).error(function(a,b,c,d){f.reject(a)}),f.promise},file:function(c){var d=b.defer();return a.get(c).success(function(a,b,c,e){var f=c("last-modified");f=new Date(f);var g={content:function(){return a},date:function(){return f}};d.resolve(g)}).error(function(a,b,c,e){d.reject(a)}),d.promise}};return e}])}(angular),function(a){"use strict";a.module("wPage").controller("controller/post",["$scope","$routeParams",function(a,b){var c=b.post;a.post=c}])}(angular),function(a){"use strict";a.module("wPage").directive("navbar",["$location",function(a){return{restrict:"E",replace:"true",templateUrl:"src/views/directives/navbar.html",scope:{navtabs:"="},link:function(b,c,d){var e=b.navtabs;b.homeTab=e[0],b.tabs=_.filter(e,function(a){return"/"!==a.url});var f=_.find(e,function(b){return b.url===a.path()});f&&(f.active=!0),b.selectTab=function(b){f&&(f.active=!1),f=b,f.active=!0,a.url(f.url)}}}}])}(angular),function(a){"use strict";a.module("wPage").directive("post",["postService",function(a){return{restrict:"E",replace:"true",templateUrl:"app/directives/views/post.html",scope:{file:"@",url:"@",link:"@",date:"@"},link:function(b,c,d){function e(a){b.isHtml=".html"==a.substr(a.length-5),b.isHtml?f(a):g(a)}function f(b){a.file("posts/"+b).then(function(a){i(a.date());var d=c.find(".html-container");d.html(a.content());var e=d.find("h1");e&&e.length>0&&$(e[0]).wrap('<a href="#/post/'+b+'"></a>')},function(a){console.log("error",a)})}function g(c){a.article(c).then(function(a){b.content=a.content(),b.link="#/post/"+a.name(),i(a.date())},function(a){console.log("error",a)})}function h(a,b){b.getResponseHeader("Link")}function i(a){b.day=a.getDate(),b.month=a.getMonth(),b.year=a.getYear()+1900}b.content="",b.onLoad=h,b.date&&i(new Date(b.date)),b.$watch("file",function(){b.file&&e(b.file)})}}}])}(angular),function(a){"use strict";a.module("wPage").directive("bookListing",["postService",function(a){return{restrict:"E",replace:"true",templateUrl:"app/directives/views/book-listing.html",scope:{book:"="},link:function(b,c,d){if(b.book.notes){var e="book-listings/"+b.book.notes+".md";a.file(e).then(function(a){b.content=a.content()},function(a){console.log("error",a)})}b.link=b.book.amazonLink||b.book.gitHubLink||b.book.link,b.hasCover=b.book.cover&&b.book.cover.length>1,b.hasAmazon=b.book.amazonLink&&b.book.amazonLink.length>1,b.hasGitHub=b.book.gitHubLink&&b.book.gitHubLink.length>1,b.onlyLink=b.book.link&&b.book.link.length>1&&!b.hasAmazon&&!b.hasGitHub}}}])}(angular),function(a){"use strict";a.module("wPage").directive("iconStar",["$location",function(a){return{restrict:"E",replace:"true",template:'<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 50 50" enable-background="new 0 0 50 50"><path d="M15.2 40.6c-.2 0-.4-.1-.6-.2-.4-.3-.5-.7-.4-1.1l3.9-12-10.2-7.5c-.4-.3-.5-.7-.4-1.1s.5-.7 1-.7h12.7L25 5.9c.1-.4.5-.7 1-.7s.8.3 1 .7L30.9 18h12.7c.4 0 .8.2 1 .6s0 .9-.4 1.1L34 27.1l3.9 12c.1.4 0 .9-.4 1.1s-.8.3-1.2 0L26 33l-10.2 7.4c-.2.1-.4.2-.6.2zM26 30.7c.2 0 .4.1.6.2l8.3 6.1-3.2-9.8c-.1-.4 0-.9.4-1.1l8.3-6.1H30.1c-.4 0-.8-.3-1-.7L26 9.5l-3.2 9.8c-.1.4-.5.7-1 .7H11.5l8.3 6.1c.4.3.5.7.4 1.1L17.1 37l8.3-6.1c.2-.1.4-.2.6-.2z"/></svg>'}}])}(angular),function(a){"use strict";a.module("wPage").directive("starRating",["$location",function(a){return{restrict:"E",replace:"true",templateUrl:"app/directives/star-rating.html",scope:{rating:"@"},link:function(a,b,c){}}}])}(angular),function(a){"use strict";a.module("wPage").directive("ngShowdown",["$sanitize","$http",function(a,b){var c=new Showdown.converter;return{restrict:"E",replace:"true",template:"<div ng-transclude></div>",transclude:"true",scope:{content:"=",href:"=",source:"=",onLoad:"="},link:function(b,d,e){function f(e){if(!e)return void d.html("");var f=a(c.makeHtml(e));d.html(f);var g=d.find("h1");b.href&&g&&g.length>0&&$(g[0]).wrap('<a href="'+b.href+'"></a>')}var g=d.find(".ng-scope");g.length>0&&(console.log(g),f(g.html())),b.$watch("source",function(){b.source&&$.ajax({url:b.source,crossDomain:!0}).done(function(a,c,d){b.onLoad&&b.onLoad(a,d),f(a)}).fail(function(){console.log("error reading external file")})}),b.$watch("content",function(){_.isUndefined(b.content)||f(b.content)})}}}])}(angular);